{"ast":null,"code":"import _classCallCheck from \"/Users/vimal_m/Desktop/react-fred/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/vimal_m/Desktop/react-fred/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/vimal_m/Desktop/react-fred/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/vimal_m/Desktop/react-fred/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/vimal_m/Desktop/react-fred/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/vimal_m/Desktop/react-fred/src/components/Line.js\";\nimport React, { Component } from 'react';\nimport '../App.css';\nimport * as d3 from 'd3';\n\nvar Line =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Line, _Component);\n\n  function Line() {\n    _classCallCheck(this, Line);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(Line).apply(this, arguments));\n  }\n\n  _createClass(Line, [{\n    key: \"drawChart\",\n    value: function drawChart(data) {\n      // set the dimensions and margins of the graph\n      var that = this;\n\n      if (!this.props.data.length && !data) {\n        return;\n      }\n\n      var data = this.props.data.length ? this.props.data : data;\n      var filtered = [];\n      data[0].observations.filter(function (obsA) {\n        return data[1].observations.some(function (obsB) {\n          if (obsA.date === obsB.date) {\n            filtered.push({\n              date: d3.timeParse(\"%Y-%m-%d\")(obsA.date),\n              value: !isNaN(obsA.value) ? +(obsA.value - obsB.value).toFixed(2) : 0\n            });\n            return true;\n          }\n\n          return false;\n        });\n      });\n      data = data.map(function (obj, index) {\n        return {\n          date: d3.timeParse(\"%Y-%m-%d\")(obj.date),\n          value: obj.value === '.' ? 0 : obj.value\n        };\n      });\n      var margin = {\n        top: 10,\n        right: 30,\n        bottom: 50,\n        left: 50\n      },\n          width = 800 - margin.left - margin.right,\n          height = 400 - margin.top - margin.bottom;\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.drawChart();\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(nextProps) {\n      this.drawChart(nextProps.data);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        id: \"line_chart\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 55\n        },\n        __self: this\n      });\n    }\n  }]);\n\n  return Line;\n}(Component);\n\nexport default Line;","map":{"version":3,"sources":["/Users/vimal_m/Desktop/react-fred/src/components/Line.js"],"names":["React","Component","d3","Line","data","that","props","length","filtered","observations","filter","obsA","some","obsB","date","push","timeParse","value","isNaN","toFixed","map","obj","index","margin","top","right","bottom","left","width","height","drawChart","nextProps"],"mappings":";;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAO,YAAP;AACA,OAAO,KAAKC,EAAZ,MAAoB,IAApB;;IAEMC,I;;;;;;;;;;;;;8BAEKC,I,EAAK;AACf;AACA,UAAIC,IAAI,GAAG,IAAX;;AACA,UAAG,CAAC,KAAKC,KAAL,CAAWF,IAAX,CAAgBG,MAAjB,IAA2B,CAACH,IAA/B,EAAoC;AACnC;AACA;;AACD,UAAIA,IAAI,GAAG,KAAKE,KAAL,CAAWF,IAAX,CAAgBG,MAAhB,GAAyB,KAAKD,KAAL,CAAWF,IAApC,GAA2CA,IAAtD;AACA,UAAII,QAAQ,GAAG,EAAf;AAEAJ,MAAAA,IAAI,CAAC,CAAD,CAAJ,CAAQK,YAAR,CAAqBC,MAArB,CAA4B,UAASC,IAAT,EAAc;AACzC,eAAOP,IAAI,CAAC,CAAD,CAAJ,CAAQK,YAAR,CACLG,IADK,CACA,UAASC,IAAT,EAAc;AACnB,cAAGF,IAAI,CAACG,IAAL,KAAcD,IAAI,CAACC,IAAtB,EAA2B;AAC1BN,YAAAA,QAAQ,CAACO,IAAT,CAAc;AACbD,cAAAA,IAAI,EAAGZ,EAAE,CAACc,SAAH,CAAa,UAAb,EAAyBL,IAAI,CAACG,IAA9B,CADM;AAEbG,cAAAA,KAAK,EAAG,CAACC,KAAK,CAACP,IAAI,CAACM,KAAN,CAAN,GAAqB,CAAC,CAACN,IAAI,CAACM,KAAL,GAAaJ,IAAI,CAACI,KAAnB,EAA0BE,OAA1B,CAAkC,CAAlC,CAAtB,GAA6D;AAFxD,aAAd;AAIA,mBAAO,IAAP;AACA;;AACD,iBAAO,KAAP;AACA,SAVK,CAAP;AAWA,OAZD;AAeAf,MAAAA,IAAI,GAAGA,IAAI,CAACgB,GAAL,CAAS,UAASC,GAAT,EAAcC,KAAd,EAAoB;AACnC,eAAO;AACNR,UAAAA,IAAI,EAAEZ,EAAE,CAACc,SAAH,CAAa,UAAb,EAAyBK,GAAG,CAACP,IAA7B,CADA;AAENG,UAAAA,KAAK,EAAEI,GAAG,CAACJ,KAAJ,KAAc,GAAd,GAAoB,CAApB,GAAwBI,GAAG,CAACJ;AAF7B,SAAP;AAIA,OALM,CAAP;AAMA,UAAIM,MAAM,GAAG;AAACC,QAAAA,GAAG,EAAE,EAAN;AAAUC,QAAAA,KAAK,EAAE,EAAjB;AAAqBC,QAAAA,MAAM,EAAE,EAA7B;AAAiCC,QAAAA,IAAI,EAAE;AAAvC,OAAb;AAAA,UACIC,KAAK,GAAG,MAAML,MAAM,CAACI,IAAb,GAAoBJ,MAAM,CAACE,KADvC;AAAA,UAEII,MAAM,GAAG,MAAMN,MAAM,CAACC,GAAb,GAAmBD,MAAM,CAACG,MAFvC;AAOC;;;wCAEkB;AAClB,WAAKI,SAAL;AACA;;;8CAEyBC,S,EAAW;AACpC,WAAKD,SAAL,CAAeC,SAAS,CAAC3B,IAAzB;AACA;;;6BAEQ;AACR,aAAO;AAAK,QAAA,EAAE,EAAC,YAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAP;AACA;;;;EAnDiBH,S;;AAsDnB,eAAeE,IAAf","sourcesContent":["import React, { Component } from 'react';\nimport '../App.css';\nimport * as d3 from 'd3';\n\nclass Line extends Component {\n\n\tdrawChart(data){\n\t// set the dimensions and margins of the graph\n\tvar that = this;\n\tif(!this.props.data.length && !data){\n\t\treturn;\n\t}\n\tvar data = this.props.data.length ? this.props.data : data;\n\tvar filtered = [];\n\t\n\tdata[0].observations.filter(function(obsA){\n\t\treturn data[1].observations\n\t\t\t.some(function(obsB){\n\t\t\t\tif(obsA.date === obsB.date){\n\t\t\t\t\tfiltered.push({\n\t\t\t\t\t\tdate : d3.timeParse(\"%Y-%m-%d\")(obsA.date),\n\t\t\t\t\t\tvalue : !isNaN(obsA.value) ? +(obsA.value - obsB.value).toFixed(2) : 0\n\t\t\t\t\t})\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t})\n\t});\n\n\n\tdata = data.map(function(obj, index){\n\t\treturn {\n\t\t\tdate: d3.timeParse(\"%Y-%m-%d\")(obj.date),\n\t\t\tvalue: obj.value === '.' ? 0 : obj.value\n\t\t}\n\t})\n\tvar margin = {top: 10, right: 30, bottom: 50, left: 50},\n\t    width = 800 - margin.left - margin.right,\n\t    height = 400 - margin.top - margin.bottom;\n\t\n\n\n\n\t}\n\n\tcomponentDidMount(){\n\t\tthis.drawChart();\n\t}\n\n\tcomponentWillReceiveProps(nextProps) {\n\t\tthis.drawChart(nextProps.data);\n\t}\n\n\trender() {\n\t\treturn <div id=\"line_chart\"></div>\n\t}\n}\n\nexport default Line;"]},"metadata":{},"sourceType":"module"}